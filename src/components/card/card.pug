mixin card(product)
  article(role='article')
    header
      p Сказочное заморское яство
      h2
        |Нямушка
        small= product.flavor
    ul
      li
        strong= product.portions
        |&nbsp;
        |#{getNumEnding(product.portions, ['порция', 'порции', 'порций'])}
      li
        if (product.gifts > 1)
          strong= product.gifts
          |&nbsp;
        |#{getNumEnding(product.gifts, ['мышь', 'мыши', 'мышей'])}
        |в&nbsp;подарок
      if product.review
        li= product.review
    div
      = formatNumber(product.weight)
      small кг
    footer
      p!= product.description
      if product.disabled
        p Печалька, #{product.flavor} закончился.
      else
        p
          |Чего сидишь? Порадуй котэ,
          button(type='button') купи.
  -
    function getNumEnding(number, endingArray) {
      var ending;
      number = number % 100;
      if (number >= 11 && number <= 19) {
        ending = endingArray[2];
      } else {
        number = number % 10;
        switch (number) {
          case 1:
            ending = endingArray[0];
            break;
          case 2:
          case 3:
          case 4:
            ending = endingArray[1];
            break;
          default:
            ending = endingArray[2];
        }
      }
      return ending;
    }

    function formatNumber(number) {
      return String(number).replace('.', ',');
    }
